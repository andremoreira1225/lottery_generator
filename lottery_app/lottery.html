<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<style>
    body{
        background: #a8c0ff;  /* fallback for old browsers */
        background: -webkit-linear-gradient(to right, #3f2b96, #a8c0ff);  /* Chrome 10-25, Safari 5.1-6 */
        background: linear-gradient(to right, #3f2b96, #a8c0ff); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
    }
    .input{
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 1000px;
        height: 800px;
    }
   
    .unchecked{
        width: 50px;
        height: 30px;
        border: solid rgba(158, 158, 158, 0.712) ;
        border-width: 0.2px;
        border-radius: 10px;
    }
    .checked{
        width: 50px;
        height: 30px;
        background-color: red;
    }
</style>
<body>
        
            <div class="input">
                <div class="col-sm-4 ">

                </div>
                <br>
                <div class="radio">
                    <label for="type-game">Totoloto</label>
                    <input type="radio" value="totoloto" name="type-game" id="">
                    <label for="type-game">Euromilh√µes</label>
                    <input type="radio" value="euromilhoes" name="type-game" id="">
                </div>
                <div class="totalKeys">
                    <label for="">How many keys?</label>
                    <input type="number" id="howManyKeys" >
                </div>
                <br>
            </div>

            <button onClick="generateRandom()" class="btn btn-primary btn-lg" type="submit">Generate</button>
            <div class="print-keys">
                
            </div>
     

<script>
    let numbersArray = [];
    let input = 0;
    let view = 0;
    let numberOfKeys = 0;
    var numbersInKey = 0;
    var text = null;
    var newInputs = null;

    let inputs = document.getElementsByClassName('col-sm-4 ');
    for(let u = 1; u <= 50; u++){
        newInputs = document.createElement('button')
        newInputs.setAttribute("Name", "button-number")
        newInputs.setAttribute("Value", u)
        text = document.createTextNode(u)
        newInputs.appendChild(text)
        inputs[0].appendChild(newInputs)
    }

    

    let counter = 0;
    let activebtn = 0;
    const btns = document.getElementsByName("button-number")
    console.log(btns)
    btns.forEach((btns) => {
        btns.classList.add("unchecked")
        btns.addEventListener("click", (e) => {
            console.log("tou aqui")
            if((counter >= 0 && activebtn !== e.currentTarget)){
                console.log(counter)
                activebtn = e.currentTarget;
                e.target.classList.add("checked")
                numbersArray.push(e.currentTarget.value);
                counter++;
                console.log(counter)
            } else if((activebtn !== null && activebtn === e.currentTarget)){
                e.currentTarget.classList.remove("checked")
                removeValue = e.currentTarget.value;
                removeItem(numbersArray, removeValue)
            }
        })
    })

    function removeItem(numbersArray, value){
        let index = numbersArray.indexOf(value)
        if(index > 0){
            numbersArray.splice(index, 1);
        }
        return numbersArray
    }
       
    console.log(numbersArray);
    function generateRandom() {
        //console.log(numbersArray);
    
        numberOfKeys = document.getElementById('howManyKeys');
        numberOfKeys = numberOfKeys.value;
        let newArrayOfArrays = [];
        let j = "";
        let k = "";
        let count = 0;        
        //numberOfPermutations = permutations(numbersArray.length);
        for(let r = 0; r < numberOfKeys; r++){
            numbersArray = permutations(numbersArray)
            //console.log(typeof(numbersInKey))
            newArray = createArrayOfArrays(numbersArray)
            //console.log(newArray)
            if(r == 0){
                newArrayOfArrays.push(newArray);
                console.log(equalsElementsArray(newArray))
            }else if(r >= 1){
                newArrayOfArrays.push(newArray);
                console.log(equalsElementsArray(newArray))
                console.log(equalsIgnoreOrderArrays(newArrayOfArrays[r-1], newArrayOfArrays[r]))
            }
            
        }         

        console.log(newArrayOfArrays)
        showKeys(newArrayOfArrays)
    }

    //ta uma confusao aqui...

    function createArrayOfArrays(numbersArray){
        let newArray = [];

        let radio = document.querySelector('input[name="type-game"]:checked').value
        if(radio == "totoloto"){
            numbersInKey = 6;
            
        }else{
            numbersInKey = 7;
        }

        //console.log(typeof(numbersInKey))
        for(let x = 0; x < numbersInKey; x++){
            newArray.push(numbersArray[x]);  
        }
        return newArray;
    }


    function permutations(numbersArray){
        for(let i = numbersArray.length -1; i > 0; i--){
            j = Math.floor(Math.random() * i);
            k = numbersArray[i];
            numbersArray[i] = numbersArray[j]
            numbersArray[j] = k
        }
        return numbersArray
    }

    // falta me fazer isto....

    const equalsElementsArray = (array) => {
        for(let i = 0; i <= array.length; i++){
            let blockNumber = array[i]
            for(let y = 0; y <= array.length; y++){
                if(i === y) {

                }else{
                    equals = array[i] === array[y]
                }
            }
        }
        return false
    }

    const equalsIgnoreOrderArrays = (a, b) => {
        if (a.length !== b.length) return false;
        //console.log(a + b)
        const uniqueValues = new Set([...a, ...b]);
        for (const v of uniqueValues) {
            const aCount = a.filter(e => e === v).length;
            const bCount = b.filter(e => e === v).length;
            if (aCount !== bCount) return false;
        }
        return true;
        }
    

    function showKeys(newArrayOfArrays){
        let outputArea = document.getElementsByClassName('print-keys');
        console.log("hello")
        newList = document.createElement('ul')
        for(let y = 0; y <= newArrayOfArrays.length-1; y++){
            newOutput = document.createElement('li')
            newOutput.setAttribute("Name", "label-keys")
            newOutput.setAttribute("Value", newArrayOfArrays[y])
            text = document.createTextNode( newArrayOfArrays[y])
            newOutput.appendChild(text)
            newList.appendChild(newOutput)
            outputArea[0].appendChild(newList)
        }

        console.log("so para ver " + newArrayOfArrays)
    }
</script>
</body>
</html>